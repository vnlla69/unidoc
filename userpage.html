<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIDOCCS - User Dashboard</title>
    <link rel="stylesheet" href="./styles/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <header>
        <div class="logo"><img src="./images/unidoccs 1.png" alt="unidoccs1"></div>
        <div class="auth-section">
            <a href="index.html" class="auth-btn">Back to Home</a>
        </div>
    </header>
    
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fa-solid fa-bars toggle-btn"></i>
            <div>
                <img src="./images/unidoccs-index.png" alt="unidoccs-logo"> 
            </div>
        </div>
        <ul class="menu">
            <li><a href="./landing.html"><span class="icon active"><i class="fa-solid fa-home"></i></span><span class="text active">Home</span></a></li>
            <li><a href="./about.html"><span class="icon active"><i class="fa-solid fa-circle-info"></i></span><span class="text active">About</span></a></li>
            <li><a href=""><span class="icon active"><i class="fa-solid fa-file"></i></span><span class="text active">Docs</span></a></li>
            <li><a href=""><span class="icon active"><i class="fa-solid fa-circle-question"></i></span><span class="text active">Help</span></a></li>
        </ul>
    </div>
    
    <main>
        <section class="user-info">
            <h3>Welcome to your UNIDOCCS Dashboard</h3>
            <div class="id-card">
                <div class="id-header">
                    <div class="id-title">User Identification</div>
                    <div class="id-logo">UNIDOCCS</div>
                </div>
                <div class="id-content">
                    <div class="personal-info">
                        <div class="info-item">
                            <span class="info-label">Name:</span>
                            <span class="info-value" id="user-name">John Doe</span>
                            <button class="edit-btn" data-field="name"><i class="fa-solid fa-pen"></i></button>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Address:</span>
                            <span class="info-value" id="user-address">123 Blockchain Street</span>
                            <button class="edit-btn" data-field="address"><i class="fa-solid fa-pen"></i></button>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Course:</span>
                            <span class="info-value" id="user-course">Computer Science</span>
                            <button class="edit-btn" data-field="course"><i class="fa-solid fa-pen"></i></button>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Student ID:</span>
                            <span class="info-value" id="user-id">CS12345</span>
                        </div>
                    </div>
                    <div class="id-photo">
                        <img src="./images/profile-placeholder.png" alt="User Photo" id="user-photo">
                        <button class="change-photo-btn" id="changePhotoBtn"><i class="fa-solid fa-camera"></i></button>
                    </div>
                </div>
                <div class="id-footer">
                    <div class="blockchain-id">Public Address: <span id="user-wallet">0x71C7656EC7ab88b098defB751B7401B5f6d8976F</span></div>
                    <div class="expiry">Created: <span id="creation-date">04/15/2025</span></div>
                </div>
            </div>
            <div class="profile-actions">
                <button class="action-btn verify-btn" id="verifyBtn">
                    <i class="fa-solid fa-check-circle"></i> Verify Credentials
                </button>
                <button class="action-btn share-btn" id="shareBtn">
                    <i class="fa-solid fa-share-nodes"></i> Share Profile
                </button>
            </div>
        </section>
        
        <section class="documents-section">
            <h2>Credentials and Documents
                <section class="search-section">
                    <input type="text" class="search-box" placeholder="Search documents">
                </section>
            </h2>
            
            <!-- Upload Button Card -->
            <div class="document-card upload-btn" id="uploadDocBtn">
                <i class="fa-solid fa-cloud-arrow-up fa-2x"></i>
                <h4>Upload New Document</h4>
                <p>Click to add a new document to the blockchain</p>
            </div>
            
            <!-- Document cards will be dynamically loaded here -->
            <div class="document-card">
                <div class="doc-header">
                    <h4>University Degree</h4>
                    <div class="doc-actions">
                        <button class="action-icon view-btn"><i class="fa-solid fa-eye"></i></button>
                        <button class="action-icon edit-btn"><i class="fa-solid fa-pen"></i></button>
                        <button class="action-icon delete-btn"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>
                <p>Bachelor of Computer Science - Verified</p>
                <div class="document-meta">
                    <span>Type: PDF</span> |
                    <span>Uploaded: 04/12/2025</span> |
                    <span>Status: <span class="verified">Verified</span></span>
                </div>
            </div>
            
            <div class="document-card">
                <div class="doc-header">
                    <h4>Student ID Card</h4>
                    <div class="doc-actions">
                        <button class="action-icon view-btn"><i class="fa-solid fa-eye"></i></button>
                        <button class="action-icon edit-btn"><i class="fa-solid fa-pen"></i></button>
                        <button class="action-icon delete-btn"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>
                <p>University Student ID - Valid until 2026</p>
                <div class="document-meta">
                    <span>Type: Image</span> |
                    <span>Uploaded: 04/10/2025</span> |
                    <span>Status: <span class="verified">Verified</span></span>
                </div>
            </div>
            
            <div class="document-card">
                <div class="doc-header">
                    <h4>Course Certificate</h4>
                    <div class="doc-actions">
                        <button class="action-icon view-btn"><i class="fa-solid fa-eye"></i></button>
                        <button class="action-icon edit-btn"><i class="fa-solid fa-pen"></i></button>
                        <button class="action-icon delete-btn"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>
                <p>Blockchain Development - Advanced Level</p>
                <div class="document-meta">
                    <span>Type: PDF</span> |
                    <span>Uploaded: 04/05/2025</span> |
                    <span>Status: <span class="pending">Pending Verification</span></span>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Upload Document Modal -->
    <div class="modal-overlay" id="uploadModal">
        <div class="login-modal">
            <button class="modal-close" id="closeUploadModal">&times;</button>
            <h2>Upload New Document</h2>
            
            <form class="upload-form" id="uploadDocumentForm">
                <div class="form-group">
                    <label for="docTitle">Document Title</label>
                    <input type="text" id="docTitle" required>
                </div>
                
                <div class="form-group">
                    <label for="docDescription">Description</label>
                    <textarea id="docDescription" placeholder="Brief description of the document"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="docType">Document Type</label>
                    <select id="docType">
                        <option value="certificate">Certificate</option>
                        <option value="degree">Degree</option>
                        <option value="id">Identification</option>
                        <option value="transcript">Transcript</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="docFile">Upload File</label>
                    <input type="file" id="docFile" required>
                    <div class="file-info">Max file size: 5MB. Supported formats: PDF, JPG, PNG</div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="submit-btn">Upload to UNIDOCCS</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Edit Field Modal -->
    <div class="modal-overlay" id="editFieldModal">
        <div class="login-modal">
            <button class="modal-close" id="closeEditModal">&times;</button>
            <h2>Edit Information</h2>
            
            <form class="edit-form" id="editFieldForm">
                <div class="form-group">
                    <label for="fieldValue" id="fieldLabel">Value</label>
                    <input type="text" id="fieldValue" required>
                    <input type="hidden" id="fieldName">
                </div>
                
                <div class="form-group verification-note">
                    <i class="fa-solid fa-info-circle"></i>
                    <span>Changes to personal information will require verification</span>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="submit-btn">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- View Document Modal -->
    <div class="modal-overlay" id="viewDocModal">
        <div class="login-modal document-viewer">
            <button class="modal-close" id="closeViewModal">&times;</button>
            <h2 id="viewDocTitle">Document Title</h2>
            
            <div class="document-display">
                <div class="document-details">
                    <p><strong>Description:</strong> <span id="viewDocDescription">Document description will appear here</span></p>
                    <p><strong>Type:</strong> <span id="viewDocType">PDF</span></p>
                    <p><strong>Date Added:</strong> <span id="viewDocDate">04/15/2025</span></p>
                    <p><strong>Blockchain ID:</strong> <span id="viewDocBlockchainId">0x8723...f9e21</span></p>
                    <p><strong>Verification Status:</strong> <span id="viewDocStatus" class="verified">Verified</span></p>
                </div>
                
                <div class="document-preview">
                    <img src="./images/pdf-preview.png" alt="Document Preview" id="docPreview">
                </div>
                
                <div class="document-actions">
                    <button class="action-btn download-btn" id="downloadDocBtn">
                        <i class="fa-solid fa-download"></i> Download
                    </button>
                    <button class="action-btn share-doc-btn" id="shareDocBtn">
                        <i class="fa-solid fa-share-nodes"></i> Share
                    </button>
                    <button class="action-btn verify-doc-btn" id="verifyDocBtn">
                        <i class="fa-solid fa-check-circle"></i> Verify
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Photo Change Modal -->
    <div class="modal-overlay" id="photoModal">
        <div class="login-modal">
            <button class="modal-close" id="closePhotoModal">&times;</button>
            <h2>Change Profile Photo</h2>
            
            <form class="photo-form" id="photoUploadForm">
                <div class="form-group">
                    <label for="userPhoto">Select a Photo</label>
                    <input type="file" id="userPhoto" accept="image/*" required>
                    <div class="file-info">Max file size: 2MB. Supported formats: JPG, PNG</div>
                </div>
                
                <div class="photo-preview">
                    <img id="photoPreview" src="./images/profile-placeholder.png" alt="Preview">
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="submit-btn">Upload Photo</button>
                </div>
            </form>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 UNIDOCCS - All rights reserved. UwU </p>
    </footer>
    
<script>
    // DOM Elements - General UI
    const sidebar = document.querySelector('.sidebar');
    const toggleBtn = document.querySelector('.toggle-btn');
    
    // Modals
    const uploadModal = document.getElementById('uploadModal');
    const editFieldModal = document.getElementById('editFieldModal');
    const viewDocModal = document.getElementById('viewDocModal');
    const photoModal = document.getElementById('photoModal');
    
    // Buttons
    const uploadDocBtn = document.getElementById('uploadDocBtn');
    const closeUploadModal = document.getElementById('closeUploadModal');
    const closeEditModal = document.getElementById('closeEditModal');
    const closeViewModal = document.getElementById('closeViewModal');
    const closePhotoModal = document.getElementById('closePhotoModal');
    const editButtons = document.querySelectorAll('.edit-btn');
    const viewButtons = document.querySelectorAll('.view-btn');
    const deleteButtons = document.querySelectorAll('.delete-btn');
    const changePhotoBtn = document.getElementById('changePhotoBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    
    // Forms
    const uploadForm = document.getElementById('uploadDocumentForm');
    const editForm = document.getElementById('editFieldForm');
    const photoForm = document.getElementById('photoUploadForm');
    
    // Sidebar Toggle
    toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
    });
    
    // Upload Document
    uploadDocBtn.addEventListener('click', () => {
        uploadModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    });
    
    closeUploadModal.addEventListener('click', () => {
        uploadModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    });
    
    uploadForm.addEventListener('submit', (e) => {
        e.preventDefault();
        // Here you would handle the document upload to the blockchain
        alert('Document upload simulation: Document would be uploaded to blockchain');
        
        // Create a new document card with the entered details
        const docTitle = document.getElementById('docTitle').value;
        const docDesc = document.getElementById('docDescription').value;
        
        // Create a new document card
        const newDoc = document.createElement('div');
        newDoc.className = 'document-card';
        newDoc.innerHTML = `
            <div class="doc-header">
                <h4>${docTitle}</h4>
                <div class="doc-actions">
                    <button class="action-icon view-btn"><i class="fa-solid fa-eye"></i></button>
                    <button class="action-icon edit-btn"><i class="fa-solid fa-pen"></i></button>
                    <button class="action-icon delete-btn"><i class="fa-solid fa-trash"></i></button>
                </div>
            </div>
            <p>${docDesc}</p>
            <div class="document-meta">
                <span>Type: ${document.getElementById('docType').value}</span> |
                <span>Uploaded: ${new Date().toLocaleDateString()}</span> |
                <span>Status: <span class="pending">Pending Verification</span></span>
            </div>
        `;
        
        // Add the new document to the documents section
        const uploadButton = document.getElementById('uploadDocBtn');
        uploadButton.parentNode.insertBefore(newDoc, uploadButton.nextSibling);
        
        // Add event listeners to the new buttons
        const newViewBtn = newDoc.querySelector('.view-btn');
        const newEditBtn = newDoc.querySelector('.edit-btn');
        const newDeleteBtn = newDoc.querySelector('.delete-btn');
        
        newViewBtn.addEventListener('click', handleViewDocument);
        newEditBtn.addEventListener('click', () => {
            alert('Edit document functionality would be implemented here');
        });
        newDeleteBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to delete this document?')) {
                newDoc.remove();
            }
        });
        
        // Close modal and reset form
        uploadModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        uploadForm.reset();
    });
    
    // Edit Profile Fields
    editButtons.forEach(button => {
        button.addEventListener('click', handleEditField);
    });
    
    function handleEditField(e) {
        const field = e.currentTarget.dataset.field || e.currentTarget.closest('.info-item').querySelector('.info-label').textContent.slice(0, -1).toLowerCase();
        const currentValue = document.getElementById(`user-${field}`).textContent;
        
        // Set values in the edit modal
        document.getElementById('fieldLabel').textContent = field.charAt(0).toUpperCase() + field.slice(1);
        document.getElementById('fieldValue').value = currentValue;
        document.getElementById('fieldName').value = field;
        
        // Show modal
        editFieldModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
    
    closeEditModal.addEventListener('click', () => {
        editFieldModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    });
    
    editForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const field = document.getElementById('fieldName').value;
        const newValue = document.getElementById('fieldValue').value;
        
        // Update the field in the UI
        document.getElementById(`user-${field}`).textContent = newValue;
        
        // Close modal
        editFieldModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        
        // Show success message
        alert(`${field.charAt(0).toUpperCase() + field.slice(1)} updated successfully! Changes will be verified on the blockchain.`);
    });
    
    // View Document
    viewButtons.forEach(button => {
        button.addEventListener('click', handleViewDocument);
    });
    
    function handleViewDocument(e) {
        const docCard = e.currentTarget.closest('.document-card');
        const title = docCard.querySelector('h4').textContent;
        const description = docCard.querySelector('p').textContent;
        const meta = docCard.querySelector('.document-meta').textContent;
        
        // Extract document details
        document.getElementById('viewDocTitle').textContent = title;
        document.getElementById('viewDocDescription').textContent = description;
        
        // Parse metadata (simple parsing)
        const type = meta.includes('Type:') ? meta.split('Type:')[1].split('|')[0].trim() : 'Unknown';
        document.getElementById('viewDocType').textContent = type;
        
        const date = meta.includes('Uploaded:') ? meta.split('Uploaded:')[1].split('|')[0].trim() : 'Unknown';
        document.getElementById('viewDocDate').textContent = date;
        
        // Set blockchain ID
        document.getElementById('viewDocBlockchainId').textContent = '0x' + Math.random().toString(16).substr(2, 40);
        
        // Set status
        const status = docCard.querySelector('.verified') ? 'Verified' : 'Pending Verification';
        const statusElement = document.getElementById('viewDocStatus');
        statusElement.textContent = status;
        statusElement.className = status === 'Verified' ? 'verified' : 'pending';
        
        // Show modal
        viewDocModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
    
    closeViewModal.addEventListener('click', () => {
        viewDocModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    });
    
    // Delete Document
    deleteButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            const docCard = e.currentTarget.closest('.document-card');
            if (confirm('Are you sure you want to delete this document?')) {
                docCard.remove();
            }
        });
    });
    
    // Change Photo
    changePhotoBtn.addEventListener('click', () => {
        photoModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    });
    
    closePhotoModal.addEventListener('click', () => {
        photoModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    });
    
    // Photo preview
    document.getElementById('userPhoto').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('photoPreview').src = e.target.result;
            }
            reader.readAsDataURL(file);
        }
    });
    
    photoForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Update the photo in the UI
        const previewSrc = document.getElementById('photoPreview').src;
        document.getElementById('user-photo').src = previewSrc;
        
        // Close modal
        photoModal.style.display = 'none';
        document.body.style.overflow = 'auto';
        
        alert('Profile photo updated successfully!');
    });
    
    // Logout Button
    logoutBtn.addEventListener('click', () => {
        if (confirm('Are you sure you want to log out?')) {
            window.location.href = 'index.html';
        }
    });
    
    // Document action buttons
    document.getElementById('downloadDocBtn').addEventListener('click', () => {
        alert('Download functionality would be implemented here');
    });
    
    document.getElementById('shareDocBtn').addEventListener('click', () => {
        alert('Share functionality would be implemented here. This would generate a secure link to share your verified document.');
    });
    
    document.getElementById('verifyDocBtn').addEventListener('click', () => {
        alert('Verification request sent. Your document will be verified by the network.');
        document.getElementById('viewDocStatus').textContent = 'Verification in Progress';
        document.getElementById('viewDocStatus').className = 'pending';
    });
    
    // Verify credentials button
    document.getElementById('verifyBtn').addEventListener('click', () => {
        alert('Verification process initiated. Your credentials will be verified on the blockchain.');
    });
    
    // Share profile button
    document.getElementById('shareBtn').addEventListener('click', () => {
        const shareLink = 'https://unidoccs.io/profile/' + document.getElementById('user-wallet').textContent.substring(0, 10);
        alert(`Your public profile can be shared with this link:\n${shareLink}\nThis has been copied to your clipboard.`);
    });
</script>
</body>
</html>
